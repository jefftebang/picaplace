{"ast":null,"code":"var _jsxFileName = \"/Users/zemiragabrielle/Documents/Jeff's/Web Development Course/MERN/fligno/front-end/src/user/pages/Login.js\";\nimport React, { useState, Fragment, useContext } from \"react\";\nimport \"./Auth.css\";\nimport { MDBContainer, MDBRow, MDBCol, MDBInput, MDBBtn } from \"mdbreact\";\nimport CardCatalog from \"../../global/components/front-end-comps/CardCatalog\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport ErrorNotice from \"../../global/components/front-end-comps/ErrorNotice\";\nimport UserContext from \"../../global/context/UserContext\";\n\nconst Login = () => {\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [error, setError] = useState();\n  const history = useHistory();\n  const {\n    setUserData\n  } = useContext(UserContext);\n\n  const loginSubmitHandler = async e => {\n    e.preventDefault(); // login\n\n    try {\n      const loginUser = {\n        email,\n        password\n      };\n      const loginRes = await axios.post(\"http://localhost:5001/api/users/login\", loginUser);\n      setUserData({\n        token: undefined,\n        user: undefined\n      });\n      sessionStorage.setItem(\"creator\", loginRes.data.user.id);\n      sessionStorage.setItem(\"token\", loginRes.data.token);\n      sessionStorage.setItem(\"name\", loginRes.data.user.name);\n      history.push(\"/users\");\n    } catch (err) {\n      err.response.data.msg && setError(err.response.data.msg);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CardCatalog, {\n    className: \"log-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(MDBContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MDBRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MDBCol, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"needs-validation\",\n    onSubmit: loginSubmitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"h5 mb-5 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 17\n    }\n  }, \"Login\"), error && /*#__PURE__*/React.createElement(ErrorNotice, {\n    message: error,\n    clearError: () => setError(undefined),\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"grey-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(MDBInput, {\n    id: \"email\",\n    label: \"Email\",\n    group: true,\n    icon: \"envelope\",\n    type: \"email\",\n    required: true,\n    error: \"wrong\",\n    success: \"right\",\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(MDBInput, {\n    id: \"password\",\n    label: \"Password\",\n    icon: \"lock\",\n    group: true,\n    required: true,\n    type: \"password\",\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(MDBBtn, {\n    type: \"submit\",\n    className: \"rounded-0\",\n    color: \"elegant\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 19\n    }\n  }, \"LOGIN\"))))))), /*#__PURE__*/React.createElement(CardCatalog, {\n    className: \"log-form log2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, \"Don't have an account? \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 34\n    }\n  }, \"Sign up\"))));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/zemiragabrielle/Documents/Jeff's/Web Development Course/MERN/fligno/front-end/src/user/pages/Login.js"],"names":["React","useState","Fragment","useContext","MDBContainer","MDBRow","MDBCol","MDBInput","MDBBtn","CardCatalog","Link","useHistory","axios","ErrorNotice","UserContext","Login","email","setEmail","password","setPassword","error","setError","history","setUserData","loginSubmitHandler","e","preventDefault","loginUser","loginRes","post","token","undefined","user","sessionStorage","setItem","data","id","name","push","err","response","msg","target","value"],"mappings":"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","sourcesContent":["import React, { useState, Fragment, useContext } from \"react\";\nimport \"./Auth.css\";\nimport { MDBContainer, MDBRow, MDBCol, MDBInput, MDBBtn } from \"mdbreact\";\nimport CardCatalog from \"../../global/components/front-end-comps/CardCatalog\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport ErrorNotice from \"../../global/components/front-end-comps/ErrorNotice\";\nimport UserContext from \"../../global/context/UserContext\";\n\nconst Login = () => {\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [error, setError] = useState();\n  const history = useHistory();\n  const { setUserData } = useContext(UserContext);\n\n  const loginSubmitHandler = async (e) => {\n    e.preventDefault();\n    // login\n    try {\n      const loginUser = { email, password };\n      const loginRes = await axios.post(\n        \"http://localhost:5001/api/users/login\",\n        loginUser\n      );\n      setUserData({\n        token: undefined,\n        user: undefined,\n      });\n      sessionStorage.setItem(\"creator\", loginRes.data.user.id);\n      sessionStorage.setItem(\"token\", loginRes.data.token);\n      sessionStorage.setItem(\"name\", loginRes.data.user.name);\n      history.push(\"/users\");\n    } catch (err) {\n      err.response.data.msg && setError(err.response.data.msg);\n    }\n  };\n\n  return (\n    <Fragment>\n      <CardCatalog className=\"log-form\">\n        <MDBContainer>\n          <MDBRow>\n            <MDBCol>\n              <form className=\"needs-validation\" onSubmit={loginSubmitHandler}>\n                <p className=\"h5 mb-5 text-center\">Login</p>\n                {error && (\n                  <ErrorNotice\n                    message={error}\n                    clearError={() => setError(undefined)}\n                    className=\"text-center\"\n                  />\n                )}\n                <div className=\"grey-text\">\n                  <MDBInput\n                    id=\"email\"\n                    label=\"Email\"\n                    group\n                    icon=\"envelope\"\n                    type=\"email\"\n                    required\n                    error=\"wrong\"\n                    success=\"right\"\n                    onChange={(e) => setEmail(e.target.value)}\n                  />\n                  <MDBInput\n                    id=\"password\"\n                    label=\"Password\"\n                    icon=\"lock\"\n                    group\n                    required\n                    type=\"password\"\n                    onChange={(e) => setPassword(e.target.value)}\n                  />\n                </div>\n\n                <div className=\"text-center\">\n                  <MDBBtn type=\"submit\" className=\"rounded-0\" color=\"elegant\">\n                    LOGIN\n                  </MDBBtn>\n                </div>\n              </form>\n            </MDBCol>\n          </MDBRow>\n        </MDBContainer>\n      </CardCatalog>\n      <CardCatalog className=\"log-form log2\">\n        <p>\n          Don't have an account? <Link to=\"/signup\">Sign up</Link>\n        </p>\n      </CardCatalog>\n    </Fragment>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}