{"ast":null,"code":"var _jsxFileName = \"/Users/zemiragabrielle/Documents/Jeff's/Web Development Course/MERN/fligno/front-end/src/user/pages/Login.js\";\nimport React, { useState, Fragment } from \"react\";\nimport \"./Auth.css\";\nimport { MDBContainer, MDBRow, MDBCol, MDBInput, MDBBtn } from \"mdbreact\";\nimport CardCatalog from \"../../global/components/front-end-comps/CardCatalog\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport ErrorNotice from \"../../global/components/front-end-comps/ErrorNotice\";\n\nconst Login = () => {\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [error, setError] = useState();\n  const history = useHistory();\n\n  const loginSubmitHandler = async e => {\n    e.preventDefault(); // login\n\n    try {\n      const loginUser = {\n        email,\n        password\n      };\n      const loginRes = await fetch(\"http://localhost:5001/api/users/login\", loginUser, {\n        method: \"post\",\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      sessionStorage.setItem(\"creator\", loginRes.data.user.id);\n      sessionStorage.setItem(\"token\", loginRes.data.token);\n      sessionStorage.setItem(\"name\", loginRes.data.user.name);\n      history.push(\"/users\");\n    } catch (err) {\n      err.response.data.msg && setError(err.response.data.msg);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CardCatalog, {\n    className: \"log-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(MDBContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MDBRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MDBCol, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"needs-validation\",\n    onSubmit: loginSubmitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"h5 mb-5 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 17\n    }\n  }, \"Login\"), error && /*#__PURE__*/React.createElement(ErrorNotice, {\n    message: error,\n    clearError: () => setError(undefined),\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"grey-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(MDBInput, {\n    id: \"email\",\n    label: \"Email\",\n    group: true,\n    icon: \"envelope\",\n    type: \"email\",\n    required: true,\n    error: \"wrong\",\n    success: \"right\",\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(MDBInput, {\n    id: \"password\",\n    label: \"Password\",\n    icon: \"lock\",\n    group: true,\n    required: true,\n    type: \"password\",\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(MDBBtn, {\n    type: \"submit\",\n    className: \"rounded-0\",\n    color: \"elegant\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 19\n    }\n  }, \"LOGIN\"))))))), /*#__PURE__*/React.createElement(CardCatalog, {\n    className: \"log-form log2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, \"Don't have an account? \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 34\n    }\n  }, \"Sign up\"))));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/zemiragabrielle/Documents/Jeff's/Web Development Course/MERN/fligno/front-end/src/user/pages/Login.js"],"names":["React","useState","Fragment","MDBContainer","MDBRow","MDBCol","MDBInput","MDBBtn","CardCatalog","Link","useHistory","axios","ErrorNotice","Login","email","setEmail","password","setPassword","error","setError","history","loginSubmitHandler","e","preventDefault","loginUser","loginRes","fetch","method","body","JSON","stringify","sessionStorage","setItem","data","user","id","token","name","push","err","response","msg","undefined","target","value"],"mappings":"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","sourcesContent":["import React, { useState, Fragment } from \"react\";\nimport \"./Auth.css\";\nimport { MDBContainer, MDBRow, MDBCol, MDBInput, MDBBtn } from \"mdbreact\";\nimport CardCatalog from \"../../global/components/front-end-comps/CardCatalog\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport ErrorNotice from \"../../global/components/front-end-comps/ErrorNotice\";\n\nconst Login = () => {\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [error, setError] = useState();\n  const history = useHistory();\n\n  const loginSubmitHandler = async (e) => {\n    e.preventDefault();\n    // login\n    try {\n      const loginUser = { email, password };\n      const loginRes = await fetch(\n        \"http://localhost:5001/api/users/login\",\n        loginUser,\n        {\n          method: \"post\",\n          body: JSON.stringify({\n            email,\n            password,\n          }),\n        }\n      );\n      sessionStorage.setItem(\"creator\", loginRes.data.user.id);\n      sessionStorage.setItem(\"token\", loginRes.data.token);\n      sessionStorage.setItem(\"name\", loginRes.data.user.name);\n      history.push(\"/users\");\n    } catch (err) {\n      err.response.data.msg && setError(err.response.data.msg);\n    }\n  };\n\n  return (\n    <Fragment>\n      <CardCatalog className=\"log-form\">\n        <MDBContainer>\n          <MDBRow>\n            <MDBCol>\n              <form className=\"needs-validation\" onSubmit={loginSubmitHandler}>\n                <p className=\"h5 mb-5 text-center\">Login</p>\n                {error && (\n                  <ErrorNotice\n                    message={error}\n                    clearError={() => setError(undefined)}\n                    className=\"text-center\"\n                  />\n                )}\n                <div className=\"grey-text\">\n                  <MDBInput\n                    id=\"email\"\n                    label=\"Email\"\n                    group\n                    icon=\"envelope\"\n                    type=\"email\"\n                    required\n                    error=\"wrong\"\n                    success=\"right\"\n                    onChange={(e) => setEmail(e.target.value)}\n                  />\n                  <MDBInput\n                    id=\"password\"\n                    label=\"Password\"\n                    icon=\"lock\"\n                    group\n                    required\n                    type=\"password\"\n                    onChange={(e) => setPassword(e.target.value)}\n                  />\n                </div>\n\n                <div className=\"text-center\">\n                  <MDBBtn type=\"submit\" className=\"rounded-0\" color=\"elegant\">\n                    LOGIN\n                  </MDBBtn>\n                </div>\n              </form>\n            </MDBCol>\n          </MDBRow>\n        </MDBContainer>\n      </CardCatalog>\n      <CardCatalog className=\"log-form log2\">\n        <p>\n          Don't have an account? <Link to=\"/signup\">Sign up</Link>\n        </p>\n      </CardCatalog>\n    </Fragment>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}